(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{353:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),i=a(63),r=a.n(i),c=a(20),s=a(37),o=a(69),d=a(160),j=a(161),u=a(162),b=a(185),h=a(187),m=a(38),p=a(27),x=(a(73),a(165)),O=a.n(x),f=a(7),v=function(e){Object(u.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).selectionChanged=function(e){n.setState({detectorType:e.target.value})},n.fileSelected=function(e){var t=e.target.files[0],a=t.type,l=e.target.name,i=e.target.files[0].name;n.setState(Object(o.a)({},l,i));var r=l.replace("Name",""),c=l.replace("Name","Error");["application/vnd.ms-excel","csv"].includes(a)?(n.setState(Object(o.a)({},c,!1)),n.csvToJson(t,r)):n.setState(Object(o.a)({},c,!0)),e.target.value=null},n.submitHandler=function(e){e.preventDefault(),O.a.post("/detect",{detectorType:n.state.detectorType,learn:n.state.learnFile,anomaly:n.state.anomalyFile}).then((function(e){var t=e.data.report,a=[];t.forEach((function(e){var t=e.timeStep[0],n=e.timeStep.pop();a.push({description:e.description,timeStep:[t,n]})})),n.props.parentCallback(a)})).catch((function(e){return console.log(e)})),n.setDefaultState()},n.state={detectorType:"",learnFileName:"Please Upload Learn CSV",anomalyFileName:"Please Upload Anomaly CSV",learnFile:null,anomalyFile:null,learnFileError:!1,anomalyFileError:!1,mydata:[]},n.baseState=n.state,n}return Object(j.a)(a,[{key:"csvToJson",value:function(e,t){var a=this,n=new FileReader;n.readAsText(e,"UTF-8"),n.onload=function(){for(var e=n.result.split(/\r\n|\r|\n/g),l=[],i=e[0].split(","),r=e.length,c=0;c<i.length;c++){for(var s={},d=[],j=1;j<r-1;j++){var u=e[j].split(",");d.push(parseFloat(u[c]))}s[i[c]]=d,l.push(s)}var b=JSON.stringify(l);b="{"+(b=(b=(b=b.replaceAll("{","")).replaceAll("}","")).substring(1,b.length-1))+"}",a.setState(Object(o.a)({},t,b))}}},{key:"setDefaultState",value:function(){this.setState(this.baseState)}},{key:"checkFormValidation",value:function(){var e=this.state,t=e.detectorType,a=e.learnFileName,n=e.anomalyFileName,l=e.learnFileError,i=e.anomalyFileError;return t===this.baseState.detectorType||(!(a!==this.baseState.learnFileName&&!l)||(!(n!==this.baseState.anomalyFileName&&!i)||void 0))}},{key:"render",value:function(){return Object(f.jsx)(l.a.Fragment,{children:Object(f.jsx)(s.a,{children:Object(f.jsx)(p.a,{className:"m-3 items mainForm needs-validation",noValidate:!0,onSubmit:this.submitHandler,children:Object(f.jsxs)(s.a,{children:[Object(f.jsx)(m.a,{xs:"auto",children:Object(f.jsxs)(p.a.Control,{as:"select",className:"mr-sm-2",onChange:this.selectionChanged,custom:!0,value:this.state.detectorType,children:[Object(f.jsx)("option",{value:"",children:"Choose Algorithem..."}),Object(f.jsx)("option",{value:"regression",children:"Regression"}),Object(f.jsx)("option",{value:"hybrid",children:"Hybrid"})]})}),Object(f.jsx)(m.a,{children:Object(f.jsx)(p.a.Group,{children:Object(f.jsxs)(p.a.File,{className:"inputFile",id:"custom-file",custom:!0,children:[Object(f.jsx)(p.a.File.Input,{name:"learnFileName",onInput:this.fileSelected,isInvalid:this.state.learnFileError}),Object(f.jsx)(p.a.File.Label,{children:this.state.learnFileName}),Object(f.jsx)(p.a.Control.Feedback,{type:"invalid",children:"file is not CSV type!"})]})})}),Object(f.jsx)(m.a,{children:Object(f.jsx)(p.a.Group,{children:Object(f.jsxs)(p.a.File,{className:"inputFile",id:"custom-file",custom:!0,children:[Object(f.jsx)(p.a.File.Input,{name:"anomalyFileName",onInput:this.fileSelected,isInvalid:this.state.anomalyFileError}),Object(f.jsx)(p.a.File.Label,{children:this.state.anomalyFileName}),Object(f.jsx)(p.a.Control.Feedback,{type:"invalid",children:"file is not CSV type!"})]})})}),Object(f.jsx)(m.a,{children:Object(f.jsx)(h.a,{type:"submit",disabled:this.checkFormValidation(),children:"Submit"})})]})})})})}}]),a}(n.Component),y=a(355),F=a(356),g=a(360),S=a(181),N=a(182),C=a(72),k=a(68),T=a(186),E=function(e){var t=e.active,a=e.payload;e.label;return t&&a&&a.length?Object(f.jsx)("div",{className:"custom-tooltip",children:Object(f.jsx)("p",{className:"label",children:"Anomalies found from ".concat(a[0].value[0]," until ").concat(a[0].value[1])})}):null},A=function(e){var t=e.x,a=e.y,n=e.payload.value.split("~~");return Object(f.jsx)("g",{transform:"translate(".concat(t,",").concat(a,")"),children:Object(f.jsxs)("text",{x:0,y:0,textAnchor:"end",fill:"#666",children:[Object(f.jsx)("tspan",{children:n[0]}),Object(f.jsx)("tspan",{x:0,dy:"20",children:n[1]})]})})};var w=function(e){var t=Object(n.useState)(e.data),a=Object(c.a)(t,1)[0],l=document.createElement("canvas").getContext("2d").measureText("CorrelatedFeatures").width;return a.forEach((function(e){var t=function(e){var t=e.split("~~"),a=document.createElement("canvas").getContext("2d");return Math.max(a.measureText(t[0]).width,a.measureText(t[1]).width)}(e.description);t>l&&(l=t)})),l+=50,Object(f.jsx)(y.a,{className:"chart",width:"75%",height:300,children:Object(f.jsxs)(F.a,{data:a,margin:{top:5,right:30,left:l,bottom:5},layout:"vertical",children:[Object(f.jsx)(g.a,{strokeDasharray:"3 3"}),Object(f.jsx)(S.a,{type:"number",domain:["auto","auto"]}),Object(f.jsx)(N.a,{type:"category",dataKey:"description",label:{value:"CorrelatedFeatures",position:"insideTopLeft",dx:-90},tick:Object(f.jsx)(A,{})}),Object(f.jsx)(C.a,{content:Object(f.jsx)(E,{})}),Object(f.jsx)(k.a,{}),Object(f.jsx)(T.a,{dataKey:"timeStep",fill:"#8884d8"})]})})},I=function(){var e=Object(n.useState)([]),t=Object(c.a)(e,2),a=t[0],i=t[1];return Object(f.jsxs)(l.a.Fragment,{children:[Object(f.jsx)(s.a,{children:Object(f.jsx)(v,{parentCallback:function(e){i(e)}})}),a.length>0&&Object(f.jsx)(s.a,{children:Object(f.jsx)(w,{data:a},Math.random())})]})},V=a(183);a(352);r.a.render(Object(f.jsxs)(V.a,{fluid:!0,children:[Object(f.jsx)(s.a,{style:{textAlign:"center",padding:"10px 0",fontSize:"50px",fontWeight:"bold",background:"rgba(0, 128, 0, 0.3)"},children:Object(f.jsx)(m.a,{children:"Anomaly Detection Server"})}),Object(f.jsx)(s.a,{children:Object(f.jsx)(I,{})})]}),document.getElementById("root"))},73:function(e,t,a){}},[[353,1,2]]]);
//# sourceMappingURL=main.e368144a.chunk.js.map