{"version":3,"sources":["components/inputForm.jsx","index.js"],"names":["InputForm","state","detectorType","learnCsvFile","anomalyCsvFile","learn","anomaly","selectionChanged","event","setState","target","value","fileSelected","file","files","file_type","type","includes","fileProp","name","csv_file","replace","fileReader","FileReader","readAsText","onload","lines","result","split","headers","len","length","i","obj","values","j","currentline","push","parseFloat","json","JSON","stringify","replaceAll","substring","console","log","submitHandler","alert","axios","post","DetectorType","Learn","Anomaly","Form","className","onSubmit","this","Row","Col","xs","Control","as","onChange","custom","Group","File","id","label","onInput","Button","Component","ReactDOM","render","Container","fluid","style","textAlign","padding","fontSize","fontWeight","background","document","getElementById"],"mappings":"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","file":"static/js/main.cfcf577f.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport Col from \"react-bootstrap/Col\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport \"../style.css\";\r\nimport axios from \"axios\";\r\n\r\nclass InputForm extends Component {\r\n  state = {\r\n    detectorType: \"\",\r\n    learnCsvFile: \"Please Upload Learn CSV\",\r\n    anomalyCsvFile: \"Please Upload Anomaly CSV\",\r\n    learn:null, // learn file\r\n    anomaly:null // test file\r\n  };\r\n\r\n\r\n\r\n  selectionChanged = (event) => {\r\n    this.setState({ detectorType: event.target.value });\r\n  };\r\n\r\n  fileSelected = (event) => {\r\n    let file = event.target.files[0];\r\n    let file_type = file.type; //getting selected file type\r\n    let valid_extensions = [\"application/vnd.ms-excel\", \"csv\"]; //adding some valid image extensions in array\r\n    if (valid_extensions.includes(file_type)){\r\n      let fileProp = event.target.name;\r\n      let csv_file = event.target.files[0].name;\r\n      this.setState({ [fileProp]: csv_file });  \r\n      let type = fileProp.replace(\"CsvFile\", '')\r\n      // console.log(type)\r\n      // this.setState({[type]: event.target.files[0]}) // trying to change learn/anomaly to the chosen file\r\n\r\n      let fileReader = new FileReader(); //creating new FileReader object\r\n        fileReader.readAsText(file, \"UTF-8\");\r\n        fileReader.onload = () => {\r\n            var lines = fileReader.result.split(\"\\r\\n\");\r\n            var result = [];\r\n            var headers = lines[0].split(\",\");\r\n            var len = lines.length;\r\n            for (var i = 0; i < headers.length; i++) {\r\n                var obj = {};\r\n                var values=[]\r\n                for (var j = 1; j < len-1; j++) {\r\n                    var currentline = lines[j].split(\",\");\r\n                    values.push(parseFloat(currentline[i]));\r\n                }\r\n                obj[headers[i]] = values;\r\n                result.push(obj);\r\n            }\r\n            var json = JSON.stringify(result); //JSON\r\n            json = json.replaceAll('{','');\r\n            json = json.replaceAll('}','');\r\n            json =json.substring(1,json.length-1); // remove wrapping []\r\n            json = \"{\" + json + \"}\";\r\n            // console.log(json);\r\n            this.setState({[type]: json})\r\n            console.log(this.state.learn)\r\n            console.log(this.state.anomaly)\r\n        }\r\n    }\r\n\r\n  };\r\n\r\n  submitHandler = (event) =>{\r\n    alert(\"submitted files!!!!\")\r\n    const reader = new FileReader()\r\n    // reader.readAsText(this.state.learn) // does it work?\r\n    // console.log(reader.result.substring(0,100)) // doesn't work\r\n    axios.post('http://localhost:8081/detect', {\r\n      DetectorType: this.state.detectorType,\r\n      Learn: this.state.learn,\r\n      Anomaly: this.state.anomaly\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Form className=\"m-3 items mainForm\" onSubmit={this.submitHandler}>\r\n        <Row>\r\n          <Col xs=\"auto\">\r\n            <Form.Control\r\n              as=\"select\"\r\n              className=\"mr-sm-2\"\r\n              onChange={this.selectionChanged}\r\n              custom\r\n            >\r\n              <option value=\"\">Choose Algorithem...</option>\r\n              <option value=\"regression\">Regression</option>\r\n              <option value=\"hybrid\">Hybrid</option>\r\n            </Form.Control>\r\n          </Col>\r\n          <Col>\r\n            <Form.Group>\r\n              <Form.File\r\n                className=\"inputFile\"\r\n                id=\"custom-file\"\r\n                label={this.state.learnCsvFile}\r\n                onInput={this.fileSelected}\r\n                name=\"learnCsvFile\"\r\n                custom\r\n              ></Form.File>\r\n            </Form.Group>\r\n          </Col>\r\n          <Col>\r\n            <Form.Group>\r\n              <Form.File\r\n                className=\"inputFile\"\r\n                id=\"custom-file\"\r\n                label={this.state.anomalyCsvFile}\r\n                name=\"anomalyCsvFile\"\r\n                onInput={this.fileSelected}\r\n                custom\r\n              ></Form.File>\r\n            </Form.Group>\r\n          </Col>\r\n          <Col>\r\n            <Button type=\"submit\">Submit</Button>\r\n          </Col>\r\n        </Row>\r\n      </Form>\r\n    );\r\n  }\r\n}\r\n\r\nexport default InputForm;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport InputForm from \"./components/inputForm\";\r\nimport Container from \"react-bootstrap/Container\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport Col from \"react-bootstrap/Col\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport \"./style.css\";\r\n\r\nReactDOM.render(\r\n  <Container fluid>\r\n    <Row\r\n      style={{\r\n        textAlign: \"center\",\r\n        padding: \"10px 0\",\r\n        fontSize: \"50px\",\r\n        fontWeight: \"bold\",\r\n        background: \"rgba(0, 128, 0, 0.3)\",\r\n      }}\r\n    >\r\n      <Col>Anomaly Detection Server</Col>\r\n    </Row>\r\n    <Row>\r\n      <InputForm />\r\n    </Row>\r\n  </Container>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}