{"ast":null,"code":"import _defineProperty from\"C:/Users/\\u05DE\\u05D5\\u05E8\\u05D9\\u05D4 \\u05D5\\u05E0\\u05E8\\u05D9\\u05D4/Desktop/AnomalyDetectionWebApp/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:/Users/\\u05DE\\u05D5\\u05E8\\u05D9\\u05D4 \\u05D5\\u05E0\\u05E8\\u05D9\\u05D4/Desktop/AnomalyDetectionWebApp/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/\\u05DE\\u05D5\\u05E8\\u05D9\\u05D4 \\u05D5\\u05E0\\u05E8\\u05D9\\u05D4/Desktop/AnomalyDetectionWebApp/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/\\u05DE\\u05D5\\u05E8\\u05D9\\u05D4 \\u05D5\\u05E0\\u05E8\\u05D9\\u05D4/Desktop/AnomalyDetectionWebApp/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/\\u05DE\\u05D5\\u05E8\\u05D9\\u05D4 \\u05D5\\u05E0\\u05E8\\u05D9\\u05D4/Desktop/AnomalyDetectionWebApp/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import Button from\"react-bootstrap/Button\";import Row from\"react-bootstrap/Row\";import Col from\"react-bootstrap/Col\";import Form from\"react-bootstrap/Form\";import\"../style.css\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var InputForm=/*#__PURE__*/function(_Component){_inherits(InputForm,_Component);var _super=_createSuper(InputForm);function InputForm(){var _this;_classCallCheck(this,InputForm);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={detectorType:\"\",learnCsvFile:\"Please Upload Learn CSV\",anomalyCsvFile:\"Please Upload Anomaly CSV\",learn:null,// learn file\nanomaly:null// test file\n};_this.selectionChanged=function(event){_this.setState({detectorType:event.target.value});};_this.fileSelected=function(event){var file=event.target.files[0];var file_type=file.type;//getting selected file type\nvar valid_extensions=[\"application/vnd.ms-excel\",\"csv\"];//adding some valid image extensions in array\nif(valid_extensions.includes(file_type)){var fileProp=event.target.name;var csv_file=event.target.files[0].name;_this.setState(_defineProperty({},fileProp,csv_file));var type=fileProp.replace(\"CsvFile\",'');// console.log(type)\n// this.setState({[type]: event.target.files[0]}) // trying to change learn/anomaly to the chosen file\nvar fileReader=new FileReader();//creating new FileReader object\nfileReader.readAsText(file,\"UTF-8\");fileReader.onload=function(){var lines=fileReader.result.split(\"\\r\\n\");var result=[];var headers=lines[0].split(\",\");var len=lines.length;for(var i=0;i<headers.length;i++){var obj={};var values=[];for(var j=1;j<len-1;j++){var currentline=lines[j].split(\",\");values.push(parseFloat(currentline[i]));}obj[headers[i]]=values;result.push(obj);}var json=JSON.stringify(result);//JSON\njson=json.replaceAll('{','');json=json.replaceAll('}','');json=json.substring(1,json.length-1);// remove wrapping []\njson=\"{\"+json+\"}\";// console.log(json);\n_this.setState(_defineProperty({},type,json));console.log(_this.state.learn);console.log(_this.state.anomaly);};}};_this.submitHandler=function(event){alert(\"submitted files!!!!\");var reader=new FileReader();// reader.readAsText(this.state.learn) // does it work?\n// console.log(reader.result.substring(0,100)) // doesn't work\naxios.post('http://localhost:8081/detect',{DetectorType:_this.state.detectorType,Learn:_this.state.learn,Anomaly:_this.state.anomaly});};return _this;}_createClass(InputForm,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(Form,{className:\"m-3 items mainForm\",onSubmit:this.submitHandler,children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{xs:\"auto\",children:/*#__PURE__*/_jsxs(Form.Control,{as:\"select\",className:\"mr-sm-2\",onChange:this.selectionChanged,custom:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Choose Algorithem...\"}),/*#__PURE__*/_jsx(\"option\",{value:\"regression\",children:\"Regression\"}),/*#__PURE__*/_jsx(\"option\",{value:\"hybrid\",children:\"Hybrid\"})]})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Form.Group,{children:/*#__PURE__*/_jsx(Form.File,{className:\"inputFile\",id:\"custom-file\",label:this.state.learnCsvFile,onInput:this.fileSelected,name:\"learnCsvFile\",custom:true})})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Form.Group,{children:/*#__PURE__*/_jsx(Form.File,{className:\"inputFile\",id:\"custom-file\",label:this.state.anomalyCsvFile,name:\"anomalyCsvFile\",onInput:this.fileSelected,custom:true})})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"Submit\"})})]})});}}]);return InputForm;}(Component);export default InputForm;","map":{"version":3,"sources":["C:/Users/מוריה ונריה/Desktop/AnomalyDetectionWebApp/frontend/src/components/inputForm.jsx"],"names":["React","Component","Button","Row","Col","Form","axios","InputForm","state","detectorType","learnCsvFile","anomalyCsvFile","learn","anomaly","selectionChanged","event","setState","target","value","fileSelected","file","files","file_type","type","valid_extensions","includes","fileProp","name","csv_file","replace","fileReader","FileReader","readAsText","onload","lines","result","split","headers","len","length","i","obj","values","j","currentline","push","parseFloat","json","JSON","stringify","replaceAll","substring","console","log","submitHandler","alert","reader","post","DetectorType","Learn","Anomaly"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport Col from \"react-bootstrap/Col\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport \"../style.css\";\r\nimport axios from \"axios\";\r\n\r\nclass InputForm extends Component {\r\n  state = {\r\n    detectorType: \"\",\r\n    learnCsvFile: \"Please Upload Learn CSV\",\r\n    anomalyCsvFile: \"Please Upload Anomaly CSV\",\r\n    learn:null, // learn file\r\n    anomaly:null // test file\r\n  };\r\n\r\n\r\n\r\n  selectionChanged = (event) => {\r\n    this.setState({ detectorType: event.target.value });\r\n  };\r\n\r\n  fileSelected = (event) => {\r\n    let file = event.target.files[0];\r\n    let file_type = file.type; //getting selected file type\r\n    let valid_extensions = [\"application/vnd.ms-excel\", \"csv\"]; //adding some valid image extensions in array\r\n    if (valid_extensions.includes(file_type)){\r\n      let fileProp = event.target.name;\r\n      let csv_file = event.target.files[0].name;\r\n      this.setState({ [fileProp]: csv_file });  \r\n      let type = fileProp.replace(\"CsvFile\", '')\r\n      // console.log(type)\r\n      // this.setState({[type]: event.target.files[0]}) // trying to change learn/anomaly to the chosen file\r\n\r\n      let fileReader = new FileReader(); //creating new FileReader object\r\n        fileReader.readAsText(file, \"UTF-8\");\r\n        fileReader.onload = () => {\r\n            var lines = fileReader.result.split(\"\\r\\n\");\r\n            var result = [];\r\n            var headers = lines[0].split(\",\");\r\n            var len = lines.length;\r\n            for (var i = 0; i < headers.length; i++) {\r\n                var obj = {};\r\n                var values=[]\r\n                for (var j = 1; j < len-1; j++) {\r\n                    var currentline = lines[j].split(\",\");\r\n                    values.push(parseFloat(currentline[i]));\r\n                }\r\n                obj[headers[i]] = values;\r\n                result.push(obj);\r\n            }\r\n            var json = JSON.stringify(result); //JSON\r\n            json = json.replaceAll('{','');\r\n            json = json.replaceAll('}','');\r\n            json =json.substring(1,json.length-1); // remove wrapping []\r\n            json = \"{\" + json + \"}\";\r\n            // console.log(json);\r\n            this.setState({[type]: json})\r\n            console.log(this.state.learn)\r\n            console.log(this.state.anomaly)\r\n        }\r\n    }\r\n\r\n  };\r\n\r\n  submitHandler = (event) =>{\r\n    alert(\"submitted files!!!!\")\r\n    const reader = new FileReader()\r\n    // reader.readAsText(this.state.learn) // does it work?\r\n    // console.log(reader.result.substring(0,100)) // doesn't work\r\n    axios.post('http://localhost:8081/detect', {\r\n      DetectorType: this.state.detectorType,\r\n      Learn: this.state.learn,\r\n      Anomaly: this.state.anomaly\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Form className=\"m-3 items mainForm\" onSubmit={this.submitHandler}>\r\n        <Row>\r\n          <Col xs=\"auto\">\r\n            <Form.Control\r\n              as=\"select\"\r\n              className=\"mr-sm-2\"\r\n              onChange={this.selectionChanged}\r\n              custom\r\n            >\r\n              <option value=\"\">Choose Algorithem...</option>\r\n              <option value=\"regression\">Regression</option>\r\n              <option value=\"hybrid\">Hybrid</option>\r\n            </Form.Control>\r\n          </Col>\r\n          <Col>\r\n            <Form.Group>\r\n              <Form.File\r\n                className=\"inputFile\"\r\n                id=\"custom-file\"\r\n                label={this.state.learnCsvFile}\r\n                onInput={this.fileSelected}\r\n                name=\"learnCsvFile\"\r\n                custom\r\n              ></Form.File>\r\n            </Form.Group>\r\n          </Col>\r\n          <Col>\r\n            <Form.Group>\r\n              <Form.File\r\n                className=\"inputFile\"\r\n                id=\"custom-file\"\r\n                label={this.state.anomalyCsvFile}\r\n                name=\"anomalyCsvFile\"\r\n                onInput={this.fileSelected}\r\n                custom\r\n              ></Form.File>\r\n            </Form.Group>\r\n          </Col>\r\n          <Col>\r\n            <Button type=\"submit\">Submit</Button>\r\n          </Col>\r\n        </Row>\r\n      </Form>\r\n    );\r\n  }\r\n}\r\n\r\nexport default InputForm;\r\n"]},"metadata":{},"sourceType":"module"}