{"ast":null,"code":"import _defineProperty from\"C:/Users/97205/Desktop/ass2/AnomalyDetectionWebApp/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:/Users/97205/Desktop/ass2/AnomalyDetectionWebApp/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/97205/Desktop/ass2/AnomalyDetectionWebApp/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/97205/Desktop/ass2/AnomalyDetectionWebApp/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/97205/Desktop/ass2/AnomalyDetectionWebApp/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import Button from\"react-bootstrap/Button\";import Row from\"react-bootstrap/Row\";import Col from\"react-bootstrap/Col\";import Form from\"react-bootstrap/Form\";import Card from\"react-bootstrap/Card\";import{BarChart,Bar,Cell,XAxis,YAxis,CartesianGrid,Tooltip,Legend,ResponsiveContainer}from\"recharts\";import\"../style.css\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var InputForm=/*#__PURE__*/function(_Component){_inherits(InputForm,_Component);var _super=_createSuper(InputForm);function InputForm(props){var _this;_classCallCheck(this,InputForm);_this=_super.call(this,props);_this.selectionChanged=function(event){_this.setState({detectorType:event.target.value});};_this.fileSelected=function(event){var file=event.target.files[0];var file_type=file.type;//getting selected file type\nvar valid_extensions=[\"application/vnd.ms-excel\",\"csv\"];//adding some valid csv extensions in array\nvar fileNameProperty=event.target.name;var fileName=event.target.files[0].name;_this.setState(_defineProperty({},fileNameProperty,fileName));var fileDataProperty=fileNameProperty.replace(\"Name\",\"\");var fileError=fileNameProperty.replace(\"Name\",\"Error\");if(valid_extensions.includes(file_type)){// set error to be false\n_this.setState(_defineProperty({},fileError,false));// valid extention -> make json of it\n_this.csvToJson(file,fileDataProperty);}else{// invalid type -> raise error\n_this.setState(_defineProperty({},fileError,true));}event.target.value=null;};_this.submitHandler=function(event){event.preventDefault();axios.post(\"/detect\",{detectorType:_this.state.detectorType,learn:_this.state.learnFile,anomaly:_this.state.anomalyFile}).then(function(response){var anomalyReport=response.data.report;// this report.timeStep is of type = [1,2,3,4]\nvar fixedReport=[];// this fixedReport.timeStep will be of type= [1,4]\nanomalyReport.forEach(function(rep){var first=rep.timeStep[0];var last=rep.timeStep.pop();fixedReport.push({description:rep.description,timeStep:[first,last]});});// update parent on the given report\n_this.props.parentCallback(fixedReport);}).catch(function(err){return console.log(err);});//set the form back to default\n_this.setDefaultState();};_this.state={detectorType:\"\",learnFileName:\"Please Upload Learn CSV\",anomalyFileName:\"Please Upload Anomaly CSV\",learnFile:null,// learn file\nanomalyFile:null,// test file\nlearnFileError:false,// for validation\nanomalyFileError:false,// for validation\nmydata:[]};// preserve the initial state to fall back to\n_this.baseState=_this.state;return _this;}_createClass(InputForm,[{key:\"csvToJson\",value:function csvToJson(file,fileDataProperty){var _this2=this;var fileReader=new FileReader();//creating new FileReader object\nfileReader.readAsText(file,\"UTF-8\");fileReader.onload=function(){var lines=fileReader.result.split(/\\r\\n|\\r|\\n/g);//split by new line depending on system\nvar result=[];var headers=lines[0].split(\",\");var len=lines.length;for(var i=0;i<headers.length;i++){var obj={};var values=[];for(var j=1;j<len-1;j++){var currentline=lines[j].split(\",\");values.push(parseFloat(currentline[i]));}obj[headers[i]]=values;result.push(obj);}var json=JSON.stringify(result);//JSON\njson=json.replaceAll(\"{\",\"\");json=json.replaceAll(\"}\",\"\");json=json.substring(1,json.length-1);// remove wrapping []\njson=\"{\"+json+\"}\";_this2.setState(_defineProperty({},fileDataProperty,json));};}// file selected handler\n},{key:\"setDefaultState\",value:function setDefaultState(){this.setState(this.baseState);}// if any of conditions are satisfied -> form is incomplete -> disable submit button\n},{key:\"checkFormValidation\",value:function checkFormValidation(){var _this$state=this.state,detectorType=_this$state.detectorType,learnFileName=_this$state.learnFileName,anomalyFileName=_this$state.anomalyFileName,learnFileError=_this$state.learnFileError,anomalyFileError=_this$state.anomalyFileError;if(detectorType===this.baseState.detectorType)return true;if(learnFileName===this.baseState.learnFileName||learnFileError)return true;if(anomalyFileName===this.baseState.anomalyFileName||anomalyFileError)return true;}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Form,{className:\"m-3 items mainForm needs-validation\",noValidate:true,onSubmit:this.submitHandler,children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{xs:\"auto\",children:/*#__PURE__*/_jsxs(Form.Control,{as:\"select\",className:\"mr-sm-2\",onChange:this.selectionChanged,custom:true,value:this.state.detectorType,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Choose Algorithem...\"}),/*#__PURE__*/_jsx(\"option\",{value:\"regression\",children:\"Regression\"}),/*#__PURE__*/_jsx(\"option\",{value:\"hybrid\",children:\"Hybrid\"})]})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Form.Group,{children:/*#__PURE__*/_jsxs(Form.File,{className:\"inputFile\",id:\"custom-file\",custom:true,children:[/*#__PURE__*/_jsx(Form.File.Input,{name:\"learnFileName\",onInput:this.fileSelected,isInvalid:this.state.learnFileError}),/*#__PURE__*/_jsx(Form.File.Label,{children:this.state.learnFileName}),/*#__PURE__*/_jsx(Form.Control.Feedback,{type:\"invalid\",children:\"file is not CSV type!\"})]})})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Form.Group,{children:/*#__PURE__*/_jsxs(Form.File,{className:\"inputFile\",id:\"custom-file\",custom:true,children:[/*#__PURE__*/_jsx(Form.File.Input,{name:\"anomalyFileName\",onInput:this.fileSelected,isInvalid:this.state.anomalyFileError}),/*#__PURE__*/_jsx(Form.File.Label,{children:this.state.anomalyFileName}),/*#__PURE__*/_jsx(Form.Control.Feedback,{type:\"invalid\",children:\"file is not CSV type!\"})]})})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Button,{type:\"submit\",disabled:this.checkFormValidation(),children:\"Submit\"})})]})})})});}}]);return InputForm;}(Component);export default InputForm;","map":{"version":3,"sources":["C:/Users/97205/Desktop/ass2/AnomalyDetectionWebApp/frontend/src/components/inputForm.jsx"],"names":["React","Component","Button","Row","Col","Form","Card","BarChart","Bar","Cell","XAxis","YAxis","CartesianGrid","Tooltip","Legend","ResponsiveContainer","axios","InputForm","props","selectionChanged","event","setState","detectorType","target","value","fileSelected","file","files","file_type","type","valid_extensions","fileNameProperty","name","fileName","fileDataProperty","replace","fileError","includes","csvToJson","submitHandler","preventDefault","post","state","learn","learnFile","anomaly","anomalyFile","then","response","anomalyReport","data","report","fixedReport","forEach","rep","first","timeStep","last","pop","push","description","parentCallback","catch","err","console","log","setDefaultState","learnFileName","anomalyFileName","learnFileError","anomalyFileError","mydata","baseState","fileReader","FileReader","readAsText","onload","lines","result","split","headers","len","length","i","obj","values","j","currentline","parseFloat","json","JSON","stringify","replaceAll","substring","checkFormValidation"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport Col from \"react-bootstrap/Col\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport Card from \"react-bootstrap/Card\";\r\nimport {\r\n  BarChart,\r\n  Bar,\r\n  Cell,\r\n  XAxis,\r\n  YAxis,\r\n  CartesianGrid,\r\n  Tooltip,\r\n  Legend,\r\n  ResponsiveContainer,\r\n} from \"recharts\";\r\n\r\nimport \"../style.css\";\r\nimport axios from \"axios\";\r\n\r\nclass InputForm extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      detectorType: \"\",\r\n      learnFileName: \"Please Upload Learn CSV\",\r\n      anomalyFileName: \"Please Upload Anomaly CSV\",\r\n      learnFile: null, // learn file\r\n      anomalyFile: null, // test file\r\n      learnFileError: false, // for validation\r\n      anomalyFileError: false, // for validation\r\n      mydata: [],\r\n    };\r\n    // preserve the initial state to fall back to\r\n    this.baseState = this.state;\r\n  }\r\n  selectionChanged = (event) => {\r\n    this.setState({ detectorType: event.target.value });\r\n  };\r\n\r\n  csvToJson(file, fileDataProperty) {\r\n    let fileReader = new FileReader(); //creating new FileReader object\r\n    fileReader.readAsText(file, \"UTF-8\");\r\n    fileReader.onload = () => {\r\n      var lines = fileReader.result.split(/\\r\\n|\\r|\\n/g); //split by new line depending on system\r\n      var result = [];\r\n      var headers = lines[0].split(\",\");\r\n      var len = lines.length;\r\n      for (var i = 0; i < headers.length; i++) {\r\n        var obj = {};\r\n        var values = [];\r\n        for (var j = 1; j < len - 1; j++) {\r\n          var currentline = lines[j].split(\",\");\r\n          values.push(parseFloat(currentline[i]));\r\n        }\r\n        obj[headers[i]] = values;\r\n        result.push(obj);\r\n      }\r\n      var json = JSON.stringify(result); //JSON\r\n      json = json.replaceAll(\"{\", \"\");\r\n      json = json.replaceAll(\"}\", \"\");\r\n      json = json.substring(1, json.length - 1); // remove wrapping []\r\n      json = \"{\" + json + \"}\";\r\n      this.setState({ [fileDataProperty]: json });\r\n    };\r\n  }\r\n  // file selected handler\r\n  fileSelected = (event) => {\r\n    let file = event.target.files[0];\r\n    let file_type = file.type; //getting selected file type\r\n    let valid_extensions = [\"application/vnd.ms-excel\", \"csv\"]; //adding some valid csv extensions in array\r\n    let fileNameProperty = event.target.name;\r\n    let fileName = event.target.files[0].name;\r\n    this.setState({ [fileNameProperty]: fileName });\r\n    let fileDataProperty = fileNameProperty.replace(\"Name\", \"\");\r\n    let fileError = fileNameProperty.replace(\"Name\", \"Error\");\r\n    if (valid_extensions.includes(file_type)) {\r\n      // set error to be false\r\n      this.setState({ [fileError]: false });\r\n      // valid extention -> make json of it\r\n      this.csvToJson(file, fileDataProperty);\r\n    } else {\r\n      // invalid type -> raise error\r\n      this.setState({ [fileError]: true });\r\n    }\r\n    event.target.value = null;\r\n  };\r\n\r\n  setDefaultState() {\r\n    this.setState(this.baseState);\r\n  }\r\n  // if any of conditions are satisfied -> form is incomplete -> disable submit button\r\n  checkFormValidation() {\r\n    const {\r\n      detectorType,\r\n      learnFileName,\r\n      anomalyFileName,\r\n      learnFileError,\r\n      anomalyFileError,\r\n    } = this.state;\r\n    if (detectorType === this.baseState.detectorType) return true;\r\n    if (learnFileName === this.baseState.learnFileName || learnFileError)\r\n      return true;\r\n    if (anomalyFileName === this.baseState.anomalyFileName || anomalyFileError)\r\n      return true;\r\n  }\r\n\r\n  submitHandler = (event) => {\r\n    event.preventDefault();\r\n    axios\r\n      .post(\"/detect\", {\r\n        detectorType: this.state.detectorType,\r\n        learn: this.state.learnFile,\r\n        anomaly: this.state.anomalyFile,\r\n      })\r\n      .then((response) => {\r\n        let anomalyReport = response.data.report; // this report.timeStep is of type = [1,2,3,4]\r\n        let fixedReport = []; // this fixedReport.timeStep will be of type= [1,4]\r\n        anomalyReport.forEach((rep) => {\r\n          let first = rep.timeStep[0];\r\n          let last = rep.timeStep.pop();\r\n          fixedReport.push({\r\n            description: rep.description,\r\n            timeStep: [first, last],\r\n          });\r\n        });\r\n        // update parent on the given report\r\n        this.props.parentCallback(fixedReport);\r\n      })\r\n      .catch((err) => console.log(err));\r\n    //set the form back to default\r\n    this.setDefaultState();\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <Row>\r\n          <Form\r\n            className=\"m-3 items mainForm needs-validation\"\r\n            noValidate\r\n            onSubmit={this.submitHandler}\r\n          >\r\n            <Row>\r\n              <Col xs=\"auto\">\r\n                <Form.Control\r\n                  as=\"select\"\r\n                  className=\"mr-sm-2\"\r\n                  onChange={this.selectionChanged}\r\n                  custom\r\n                  value={this.state.detectorType}\r\n                >\r\n                  <option value=\"\">Choose Algorithem...</option>\r\n                  <option value=\"regression\">Regression</option>\r\n                  <option value=\"hybrid\">Hybrid</option>\r\n                </Form.Control>\r\n              </Col>\r\n              <Col>\r\n                <Form.Group>\r\n                  <Form.File className=\"inputFile\" id=\"custom-file\" custom>\r\n                    <Form.File.Input\r\n                      name=\"learnFileName\"\r\n                      onInput={this.fileSelected}\r\n                      isInvalid={this.state.learnFileError}\r\n                    />\r\n                    <Form.File.Label>\r\n                      {this.state.learnFileName}\r\n                    </Form.File.Label>\r\n                    <Form.Control.Feedback type=\"invalid\">\r\n                      file is not CSV type!\r\n                    </Form.Control.Feedback>\r\n                  </Form.File>\r\n                </Form.Group>\r\n              </Col>\r\n              <Col>\r\n                <Form.Group>\r\n                  <Form.File className=\"inputFile\" id=\"custom-file\" custom>\r\n                    <Form.File.Input\r\n                      name=\"anomalyFileName\"\r\n                      onInput={this.fileSelected}\r\n                      isInvalid={this.state.anomalyFileError}\r\n                    />\r\n                    <Form.File.Label>\r\n                      {this.state.anomalyFileName}\r\n                    </Form.File.Label>\r\n                    <Form.Control.Feedback type=\"invalid\">\r\n                      file is not CSV type!\r\n                    </Form.Control.Feedback>\r\n                  </Form.File>\r\n                </Form.Group>\r\n              </Col>\r\n              <Col>\r\n                <Button type=\"submit\" disabled={this.checkFormValidation()}>\r\n                  Submit\r\n                </Button>\r\n              </Col>\r\n            </Row>\r\n          </Form>\r\n        </Row>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default InputForm;\r\n"]},"metadata":{},"sourceType":"module"}